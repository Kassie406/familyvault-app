your sidebar is stuck collapsed because the last CSS forced it to always be 64px. Let’s switch to a clean variable-driven layout so:

Sidebar is expanded by default (e.g., 240px)

It collapses only when data-sidebar-collapsed="true"

Inbox offsets from the current sidebar width (expanded or collapsed)

Main content shifts correctly

Drop this CSS (replace the previous block)

Put at the end of your global CSS.

:root{
  --sb-expanded: 240px;     /* full sidebar */
  --sb-collapsed: 64px;     /* icon-only */
  --inbox-w: 360px;         /* inbox drawer width */
}

/* Current sidebar width lives in --sb (defaults to expanded) */
body{ --sb: var(--sb-expanded); }
body[data-sidebar-collapsed="true"]{ --sb: var(--sb-collapsed); }

/* Sidebar is always visible on the far left */
#app-sidebar{
  position: fixed;
  top: 0; left: 0; bottom: 0;
  width: var(--sb);
  z-index: 40;
  transition: width .25s ease;
}

/* Inbox starts AFTER the current sidebar width */
#inbox-panel{
  position: fixed;
  top: 0; bottom: 0;
  left: var(--sb);
  width: var(--inbox-w);
  z-index: 50;
  transform: translateX(-110%);     /* hidden by default */
  transition: transform .25s ease, left .25s ease;
}
body[data-inbox-open="true"] #inbox-panel{
  transform: translateX(0);          /* slide in */
}

/* Main content shifts by the current sidebar, and by inbox when open */
#app-main{
  min-height: 100vh;
  margin-left: var(--sb);
  transition: margin-left .25s ease;
}
body[data-inbox-open="true"] #app-main{
  margin-left: calc(var(--sb) + var(--inbox-w));
}

Make sure the flags are toggled correctly

On app load (or route mounts), clear any stale flags:

document.body.removeAttribute('data-inbox-open');
// set collapsed only if your app remembers that preference; otherwise:
document.body.removeAttribute('data-sidebar-collapsed');


When opening/closing Inbox:

function openInbox(){
  document.body.setAttribute('data-inbox-open','true');
  document.body.setAttribute('data-sidebar-collapsed','true'); // lock icon-only while inbox open
}
function closeInbox(){
  document.body.removeAttribute('data-inbox-open');
  document.body.removeAttribute('data-sidebar-collapsed');      // restore to expanded (or restore your saved state)
}

Why yours got stuck

Your previous rule had:

#app-sidebar { width: var(--sb-collapsed) !important; }


…which collapses the sidebar always, even when Inbox is closed. The refactor above uses --sb that switches between expanded and collapsed based on a body attribute, so it can’t get stuck.

Apply this and you’ll get: full sidebar normally, icon bar when Inbox opens, both visible with Inbox rendered to the right of the icon bar, and main content shifting cleanly.